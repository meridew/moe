{{define "base"}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{template "title" .}} — MOE</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-brand">
            <a href="/">
                <span class="navbar-logo">⬡</span>
                <span class="navbar-title">MOE</span>
            </a>
        </div>
        <ul class="navbar-menu">
            <li><a href="/" class="{{if eq .Nav "dashboard"}}active{{end}}">Dashboard</a></li>
            <li><a href="/devices" class="{{if eq .Nav "devices"}}active{{end}}">Devices</a></li>
            <li><a href="/policies" class="{{if eq .Nav "policies"}}active{{end}}">Policies</a></li>
            <li><a href="/campaigns" class="{{if eq .Nav "campaigns"}}active{{end}}">Campaigns</a></li>
            <li><a href="/providers" class="{{if eq .Nav "providers"}}active{{end}}">Providers</a></li>
            <li><a href="/console" class="{{if eq .Nav "console"}}active{{end}}">Console</a></li>
            <li><a href="/audit" class="{{if eq .Nav "audit"}}active{{end}}">Audit Log</a></li>
        </ul>
    </nav>

    <!-- Toast notifications (driven by Alpine.js, triggered via ?flash= query param) -->
    <div x-data="toastManager()" x-init="init()" class="toast-container">
        <template x-for="t in toasts" :key="t.id">
            <div class="toast" :class="'toast-' + t.type" x-show="t.visible"
                 x-transition:enter="toast-enter"
                 x-transition:leave="toast-leave"
                 @click="dismiss(t.id)">
                <span x-text="t.message"></span>
                <button class="toast-close" @click.stop="dismiss(t.id)">&times;</button>
            </div>
        </template>
    </div>

    <main class="content">
        {{template "content" .}}
    </main>

    <footer class="footer">
        <span>MOE — Mobile Operations Engine</span>
    </footer>

    <script src="/static/js/htmx.min.js"></script>
    <script defer src="/static/js/alpine.min.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
{{end}}
